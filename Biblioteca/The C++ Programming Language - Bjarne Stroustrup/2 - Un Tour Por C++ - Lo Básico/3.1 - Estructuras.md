---
anterior: "[[3 - Tipos definidos por el usuario]]"
siguiente: "[[3.2 - Clases]]"
dg-publish: true
---
El primer paso para construir un nuevo tipo suele ser organizar los elementos que necesita en una estructura de datos, un `struct`:

```cpp
struct Vector {     
	int tamano;        // número de elementos     
	double* elemento;  // puntero a los elementos 
};
```

Esta primera versión de `Vector` consiste en un `int` y un `double*`. Una variable de tipo `Vector` puede definirse así:

```cpp
Vector v;
```

Sin embargo, por sí sola no es muy útil, porque el puntero `elem` de `v` no apunta a nada. Para que sea útil, debemos darle a `v` algunos elementos a los que apuntar.

Por ejemplo, podemos construir un `Vector` así:

```cpp
void iniciar_vector(Vector& v, int s) {     
	v.elemento = new double[s]; // asigna un arreglo de s valores double   
	v.tamano = s; 
}
```

Es decir, el miembro `elemento` de `v` obtiene un puntero producido por el operador `new`, y el miembro `tamano` recibe el número de elementos.

El `&` en `Vector&` indica que pasamos `v` por referencia no constante; de esa forma, `iniciar_vector()` puede modificar el vector que se le pasa.

El operador `new` asigna memoria de un área llamada almacenamiento libre (también conocida como memoria dinámica o heap).

Un uso simple de `Vector` se ve así:

```cpp
double leer_y_sumar(int s)
	// Lee s cantidad de enteros de cin y retorna su suma; se asume que s es positivo 
{
	Vector v;
	iniciar_vector(v,s); // asignar s elementos para v
	for(int i=0; i!=s; ++i)
		cin>>v.elemento[i]; // Lee y carga en elementos

	double suma = 0;
	for(int i=0; i!=s; ++i)
		suma+=v.elemento[i]; // Toma la suma de los elementos
	return suma;
}
```

Todavía queda un largo camino antes de que nuestro `Vector` sea tan elegante y flexible como el `vector` de la biblioteca estándar. En particular, un usuario de `Vector` debe conocer todos los detalles de su representación interna.

El resto de este capítulo y el siguiente irán mejorando gradualmente `Vector` como ejemplo para mostrar características y técnicas del lenguaje. El **Capítulo 4** presenta el `vector` de la biblioteca estándar, que incluye muchas mejoras interesantes, y el **Capítulo 31** muestra el `vector` completo en el contexto de otras utilidades de la biblioteca estándar.

Uso `vector` y otros componentes de la biblioteca estándar como ejemplos:
- para ilustrar características del lenguaje y técnicas de diseño, y
- para ayudarte a aprender y utilizar los componentes de la biblioteca estándar.

**No reinventes** componentes de la biblioteca estándar como `vector` y `string`; **úsalos**.

Usamos el operador **`.`** (punto) para acceder a miembros de un `struct` a través de un nombre (o de una referencia), y el operador **`->`** para acceder a miembros de un `struct` a través de un puntero.

Por ejemplo:

``` cpp
void f(Vector v, Vector& rv, Vector* pv) {     
	int i1 = v.tamano;   // acceso mediante nombre     
	int i2 = rv.tamano;  // acceso mediante referencia     
	int i4 = pv->tamano; // acceso mediante puntero 
}
```